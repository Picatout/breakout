C51 COMPILER V9.53.0.0   ENVAHISSEURS_MAIN                                                 01/03/2018 15:35:27 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE ENVAHISSEURS_MAIN
OBJECT MODULE PLACED IN .\src\envahisseurs_main.OBJ
COMPILER INVOKED BY: c:\SiliconLabs\SimplicityStudio\v4\developer\toolchains\keil_8051\9.53\BIN\C51.exe C:\Users\Jacques
                    -\SimplicityStudio\v4_workspace\envahisseurs\src\envahisseurs_main.c OMF2 SMALL DEBUG OBJECTEXTEND ROM(LARGE) WARNINGLEVE
                    -L(2) FLOATFUZZY(3) OPTIMIZE(9,SPEED) DEFINE(NDEBUG=1) INTVECTOR(0X0000) INTPROMOTE INCDIR(C:\Users\Jacques\SimplicityStu
                    -dio\v4_workspace\envahisseurs\inc;C:/SiliconLabs/SimplicityStudio/v4/developer/sdks/8051/v4.1.0//Device/shared/si8051bas
                    -e;C:/SiliconLabs/SimplicityStudio/v4/developer/sdks/8051/v4.1.0//Device/EFM8BB1/inc) REGFILE(envahisseurs.ORC) PRINT(.\s
                    -rc\envahisseurs_main.lst) COND CODE PAGEWIDTH(120) PAGELENGTH(65) OBJECT(.\src\envahisseurs_main.OBJ)

line level    source

   1          //=========================================================
   2          // src/envahisseurs_main.c: generated by Hardware Configurator
   3          //
   4          // This file will be updated when saving a document.
   5          // leave the sections inside the "$[...]" comment tags alone
   6          // or they will be overwritten!!
   7          //=========================================================
   8          
   9          //-----------------------------------------------------------------------------
  10          // Includes
  11          //-----------------------------------------------------------------------------
  12          #include <SI_EFM8BB1_Register_Enums.h>                  // SFR declarations
  13          #include "InitDevice.h"
  14          // $[Generated Includes]
  15          // [Generated Includes]$
  16          
  17          extern xdata unsigned  char video[256];
  18          
  19          void xor_pixel(char x, char y){
  20   1              int i;
  21   1              char mask;
  22   1              mask=1<<(7-x%8);
  23   1              i=y*8+x/8;
  24   1              video[i]^=mask;
  25   1      }
  26          //-----------------------------------------------------------------------------
  27          // SiLabs_Startup() Routine
  28          // ----------------------------------------------------------------------------
  29          // This function is called immediately after reset, before the initialization
  30          // code is run in SILABS_STARTUP.A51 (which runs before main() ). This is a
  31          // useful place to disable the watchdog timer, which is enable by default
  32          // and may trigger before main() in some instances.
  33          //-----------------------------------------------------------------------------
  34          void SiLabs_Startup (void)
  35          {
  36   1        // $[SiLabs Startup]
  37   1        // [SiLabs Startup]$
  38   1              unsigned int i;
  39   1              for (i=0;i<256;i++)video[i]=0;
  40   1              xor_pixel(0,0);
  41   1              xor_pixel(0,31);
  42   1              xor_pixel(63,0);
  43   1              xor_pixel(63,31);
  44   1      }
  45          
  46          //-----------------------------------------------------------------------------
  47          // main() Routine
  48          // ----------------------------------------------------------------------------
  49          int main (void)
  50          {
  51   1        // Call hardware initialization routine
C51 COMPILER V9.53.0.0   ENVAHISSEURS_MAIN                                                 01/03/2018 15:35:27 PAGE 2   

  52   1        enter_DefaultMode_from_RESET();
  53   1        
  54   1        while (1) 
  55   1        {
  56   2          // $[Generated Run-time code]
  57   2          // [Generated Run-time code]$
  58   2        }                             
  59   1      }
C51 COMPILER V9.53.0.0   ENVAHISSEURS_MAIN                                                 01/03/2018 15:35:27 PAGE 3   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION _xor_pixel (BEGIN)
                                           ; SOURCE LINE # 19
;---- Variable 'x' assigned to Register 'R4' ----
0000 AC07              MOV     R4,AR7
;---- Variable 'y' assigned to Register 'R5' ----
                                           ; SOURCE LINE # 22
0002 EC                MOV     A,R4
0003 75F008            MOV     B,#08H
0006 120000      E     LCALL   ?C?SCDIV
0009 AFF0              MOV     R7,B
000B C3                CLR     C
000C 7407              MOV     A,#07H
000E 9F                SUBB    A,R7
000F FF                MOV     R7,A
0010 7401              MOV     A,#01H
0012 A807              MOV     R0,AR7
0014 08                INC     R0
0015 8002              SJMP    ?C0010
0017         ?C0009:
0017 C3                CLR     C
0018 33                RLC     A
0019         ?C0010:
0019 D8FC              DJNZ    R0,?C0009
;---- Variable 'mask' assigned to Register 'R3' ----
001B FB                MOV     R3,A
                                           ; SOURCE LINE # 23
001C AF05              MOV     R7,AR5
001E EF                MOV     A,R7
001F 33                RLC     A
0020 95E0              SUBB    A,ACC
0022 FE                MOV     R6,A
0023 EF                MOV     A,R7
0024 7803              MOV     R0,#03H
0026         ?C0011:
0026 C3                CLR     C
0027 33                RLC     A
0028 CE                XCH     A,R6
0029 33                RLC     A
002A CE                XCH     A,R6
002B D8F9              DJNZ    R0,?C0011
002D FF                MOV     R7,A
002E EC                MOV     A,R4
002F 75F008            MOV     B,#08H
0032 120000      E     LCALL   ?C?SCDIV
0035 FD                MOV     R5,A
0036 33                RLC     A
0037 95E0              SUBB    A,ACC
0039 FC                MOV     R4,A
003A EF                MOV     A,R7
003B 2D                ADD     A,R5
003C FF                MOV     R7,A
003D EE                MOV     A,R6
003E 3C                ADDC    A,R4
003F FE                MOV     R6,A
;---- Variable 'i' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 24
0040 7400        E     MOV     A,#LOW video
0042 2F                ADD     A,R7
0043 F582              MOV     DPL,A
0045 7400        E     MOV     A,#HIGH video
C51 COMPILER V9.53.0.0   ENVAHISSEURS_MAIN                                                 01/03/2018 15:35:27 PAGE 4   

0047 3E                ADDC    A,R6
0048 F583              MOV     DPH,A
004A E0                MOVX    A,@DPTR
004B 6B                XRL     A,R3
004C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 25
004D 22                RET     
             ; FUNCTION _xor_pixel (END)

             ; FUNCTION SiLabs_Startup (BEGIN)
                                           ; SOURCE LINE # 34
                                           ; SOURCE LINE # 35
                                           ; SOURCE LINE # 39
;---- Variable 'i' assigned to Register 'R6/R7' ----
0000         ?C0002:
0000 7E01              MOV     R6,#01H
0002 7F00              MOV     R7,#00H
0004 900000      E     MOV     DPTR,#video
0007 E4                CLR     A
0008         ?C0012:
0008 F0                MOVX    @DPTR,A
0009 A3                INC     DPTR
000A DFFC              DJNZ    R7,?C0012
000C DEFA              DJNZ    R6,?C0012
000E         ?C0003:
                                           ; SOURCE LINE # 40
000E E4                CLR     A
000F FD                MOV     R5,A
0010 FF                MOV     R7,A
0011 120000      R     LCALL   _xor_pixel
                                           ; SOURCE LINE # 41
0014 7D1F              MOV     R5,#01FH
0016 E4                CLR     A
0017 FF                MOV     R7,A
0018 120000      R     LCALL   _xor_pixel
                                           ; SOURCE LINE # 42
001B E4                CLR     A
001C FD                MOV     R5,A
001D 7F3F              MOV     R7,#03FH
001F 120000      R     LCALL   _xor_pixel
                                           ; SOURCE LINE # 43
0022 7D1F              MOV     R5,#01FH
0024 7F3F              MOV     R7,#03FH
0026 020000      R     LJMP    _xor_pixel
             ; FUNCTION SiLabs_Startup (END)

             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 49
                                           ; SOURCE LINE # 50
                                           ; SOURCE LINE # 52
0000 120000      E     LCALL   enter_DefaultMode_from_RESET
0003         ?C0006:
                                           ; SOURCE LINE # 54
                                           ; SOURCE LINE # 55
                                           ; SOURCE LINE # 58
0003 80FE              SJMP    ?C0006
             ; FUNCTION main (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    124    ----
   CONSTANT SIZE    =   ----    ----
C51 COMPILER V9.53.0.0   ENVAHISSEURS_MAIN                                                 01/03/2018 15:35:27 PAGE 5   

   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
